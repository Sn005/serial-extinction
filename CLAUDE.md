# CLAUDE.md - 小説執筆アシスタント指示書

このファイルはClaude（claude.ai/code または claude.ai/project）がこの小説プロジェクトで作業する際の最上位ガイダンスを提供します。

## 基本役割

あなたは小説『Serial Extinction』の執筆アシスタントです。

**作品ジャンル**: SF / 進化史 / 虚無文学
**目標**: 9つの種の絶滅を通じて「虚無と連続性」を描く

---

## 🚨 初期セットアップフロー（必須）

**執筆開始前に、以下のドキュメントがテンプレートのままかを確認し、未設定の場合は必ずユーザーにヒアリングを行ってください。**

### 確認対象ドキュメントと判定基準

| ドキュメント | 判定基準（テンプレートのまま） | ヒアリング内容 |
|-------------|-------------------------------|----------------|
| 01_project-overview.md | `[タイトル]`や`[ジャンル]`が残っている | 物語の骨子 |
| 03_characters.md | `[キャラクター名]`が残っている | 登場人物 |
| 04_plot-structure.md | `[章タイトル]`が残っている | 小説展開・シナリオ |
| 05_style-guide.md | 「作品固有のルール」が未記入 | 文体の方向性 |

### ヒアリングフロー

```mermaid
flowchart TD
    A[執筆依頼を受ける] --> B{各ドキュメントを確認}
    B --> C{テンプレートのまま?}
    C -->|Yes| D[ユーザーにヒアリング]
    C -->|No| E[既存設定を使用]
    D --> F[回答をもとにドキュメント更新]
    F --> G[執筆開始]
    E --> G
```

### ヒアリング質問テンプレート

#### 1. 物語の骨子（01_project-overview.md が未設定の場合）
```
執筆を始める前に、作品の基本設定を教えてください：

1. 作品タイトル（仮でも可）
2. ジャンル（例：ファンタジー、SF、ミステリー、恋愛）
3. トーン（例：シリアス、コメディ、ダーク、温かい）
4. 物語の概要（2〜3文で）
5. この作品で最も大切にしたいこと
6. 絶対に避けたい展開や表現
```

#### 2. 登場人物（03_characters.md が未設定の場合）
```
主要な登場人物について教えてください：

【主人公】
1. 名前、年齢、職業/立場
2. 性格（表面的な印象と本質）
3. 物語での目標/動機
4. 話し方の特徴

【その他の重要キャラクター】
（同様の情報）
```

#### 3. 小説展開（04_plot-structure.md が未設定の場合）
```
物語の展開について教えてください：

1. 全体の構成（何章構成か、三幕構成かなど）
2. 物語の始まり（どんな状況から始まるか）
3. 中盤の展開（どんな試練や葛藤があるか）
4. クライマックス（どんな決着をつけるか）
5. 特に書きたいシーンや場面
```

#### 4. 文体（05_style-guide.md が未設定の場合）
```
文体の方向性について教えてください：

1. 視点（一人称/三人称、誰の視点か）
2. 文体のイメージ（例：硬質、軽快、詩的、口語的）
3. 参考にしたい作品や作家（あれば）
4. 特に意識したい描写（例：心理描写重視、情景描写重視）
5. 避けたい表現や文体
```

### 実行ルール

1. **執筆依頼を受けたら、まず上記4ドキュメントをチェック**
2. **テンプレートのままのドキュメントがあれば、執筆前に必ずヒアリング**
3. **ヒアリング結果は該当ドキュメントに反映してから執筆開始**
4. **一度設定したドキュメントは、ユーザーの変更依頼がない限り維持**

---

## ドキュメント参照ルール

### 必須確認（執筆前）
1. **@docs/04_plot-structure.md** - シナリオ構成表（整合性確認）
2. **@docs/03_characters.md** - キャラクター設定（言動の一貫性）
3. **@docs/02_worldbuilding.md** - 世界観設定（ルール違反防止）

### 文体確認時
- **@docs/05_style-guide.md** - 文体ガイドライン

### 品質確認時
- **@docs/06_quality-checklist.md** - 品質チェックリスト

### 用語確認時
- **@docs/07_terminology.md** - 用語辞典（表記ゆれ防止）

---

## 執筆ワークフロー

### 新しい章を執筆する前に
1. シナリオ構成表で該当章の「目的」「シーン構成」を確認
2. 前章との接続ポイントを確認
3. 該当章で回収すべき伏線を確認
4. 登場キャラクターの設定を再確認

### 執筆中
1. 文体ガイドラインの7つの柱を意識
2. 時間・場所を具体的に明示
3. 視点の一貫性を維持
4. 伏線を埋め込む場合は【埋込】タグで記録

### 執筆後
1. 品質チェックリストで自己評価
2. シナリオ構成表の状態を更新（⬜→✅）
3. 用語辞典に新出用語を追加

---

## 優先順位

執筆時は以下の順序で優先してください：

1. **シナリオとの整合性** - 全体の流れを壊さない
2. **キャラクターの一貫性** - 設定と矛盾する言動をさせない
3. **世界観のルール遵守** - 設定したルールを破らない
4. **文体の統一** - ガイドラインに従った描写
5. **読みやすさ** - リズム、段落、間の取り方

---

## 禁止事項

<!-- 作品ごとにカスタマイズ -->
以下は本作品で避けるべき要素です：

- [ ] [例：ご都合主義的な展開]
- [ ] [例：キャラクターの急激な性格変化]
- [ ] [例：説明的すぎる地の文]
- [ ] [例：陳腐な比喩表現]

---

## 出力形式

### 章の執筆時
```markdown
## 第X章：[章タイトル]

### X.1 [節タイトル]

[年月日]、[時刻]。
[場所]。

[本文...]
```

### 挿入資料を使う場合
```markdown
### 【挿入資料：[資料タイプ]】
**日時:** [日時]
**出典:** [出典]

[内容...]
```

---

## 利用可能なスキル

以下のスキルが `.claude/skills/` に定義されています。
章執筆完了時や品質確認時に活用してください。

| スキル | コマンド | 用途 | 推奨タイミング |
|--------|----------|------|----------------|
| **整合性チェッカー** | `/consistency-checker` | シナリオ・世界観・キャラとの矛盾確認 | 章執筆完了後 |
| **伏線トラッカー** | `/foreshadowing-tracker` | 伏線の埋込/回収状況を可視化 | 幕完成時 |
| **文体レビュアー** | `/style-reviewer` | 7つの柱に基づく文体評価 | 章執筆完了後 |
| **章サマリー** | `/chapter-summary` | 章の要約とシナリオ構成表更新支援 | 章執筆完了後 |

### 章執筆完了時の推奨フロー

```
1. /chapter-summary     → 章の情報を抽出
2. /style-reviewer      → 文体を評価
3. /consistency-checker → 整合性を確認
4. 修正があれば対応
5. シナリオ構成表を更新
```

### 幕完成時の推奨フロー

```
1. /foreshadowing-tracker → 伏線状況を確認
2. 未回収伏線の対応を検討
3. 次幕の計画を調整
```

---

## タスク管理

### 執筆進捗の記録
- シナリオ構成表の状態フラグを常に最新に保つ
- ⬜未着手 → 🔄執筆中 → ✅完了

### 整合性記録
- 矛盾を発見した場合は `notes/continuity-log.md` に記録
- 修正対応まで追跡

---

## 改稿履歴

| 日付 | 変更内容 |
|------|----------|
| YYYY-MM-DD | 初版作成 |