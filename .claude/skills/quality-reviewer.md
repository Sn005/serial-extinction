# クオリティレビュアー（品質レビューエージェント）

**発動条件**: 「品質レビュー」「総合評価」「レビュー」等のキーワード、または校正完了後

---

## 目的

執筆・校正された章の総合的な品質レビューを実施する。
既存のスキル（consistency-checker, style-reviewer, foreshadowing-tracker）を統合し、
包括的な品質評価を提供する。

---

## 実行内容

### 1. 整合性チェック（@consistency-checker 統合）

#### シナリオ整合性
- シナリオ構成表の「目的」達成度
- シーン構成との一致
- 前章・次章との接続

#### 世界観整合性
- 科学的事実の正確性
- 時間スケールの妥当性
- 地質年代との整合

#### 種設定整合性
- 種の特徴が正確に描写されているか
- 非知的生物に感情を付与していないか

### 2. 文体レビュー（@style-reviewer 統合）

#### 本作固有ルール
| ルール | チェック項目 |
|--------|-------------|
| 無人称 | 語り手の存在を示す表現がないか |
| 感情語禁止 | 非知的生物に感情語を使っていないか |
| 感傷排除 | 絶滅を悲劇として描いていないか |
| 時間スケール | 宇宙的時間スケールが明示されているか |
| 物質的連続性 | 章末に連続性描写があるか |

#### ダイナミズム
| 項目 | チェック内容 |
|------|-------------|
| 構造的起伏 | 章に明確なクライマックスがあるか |
| 対立構造 | 構造的な緊張感が設計されているか |
| 虚無感 | 「不在」による虚無が表現されているか |

#### 表現の多様性
| 項目 | チェック内容 |
|------|-------------|
| 終結表現 | 同一表現の繰り返しがないか |
| 虚無表現 | 「誰も〜なかった」の過度な使用がないか |
| 構文パターン | 同一構文の3回以上連続がないか |

### 3. 伏線管理（@foreshadowing-tracker 統合）

- 埋め込むべき伏線が埋め込まれているか
- 回収すべき伏線が回収されているか
- 新規伏線の記録

### 4. 描写の厚み評価

#### 厚みの要素
- 具体的な数値（温度、距離、年代）
- 固有名詞（種名、地名）
- 物理的・化学的プロセスの詳細
- 比較対象の使用

#### 重複・冗長の検出
- 同一テーマの複数回説明
- 総括セクションの既出内容割合
- 核心概念の出現回数

### 5. AC達成度評価

シナリオ構成表のACを検証：

#### 読者が得るべき情報
- 各情報が適切に提示されているか
- 検証可能な描写があるか

#### 読者が感じるべき感情
- 構造的手法で喚起されているか
- 直接的な言及を避けているか

#### 読者が感じてはいけないこと
- 禁止事項に抵触していないか

---

## 出力形式

```markdown
## 品質レビューレポート: Extinction XX

### 総合評価

| カテゴリ | 評価 | スコア |
|----------|------|--------|
| 整合性 | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |
| 文体 | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |
| ダイナミズム | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |
| 伏線管理 | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |
| 描写の厚み | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |
| AC達成度 | ✅良好 / ⚠️要改善 / ❌問題あり | X/10 |

**総合スコア**: XX/60 → [A/B/C/D/E]

---

### 1. 整合性チェック結果

#### シナリオ整合性
- [✅/⚠️/❌] 目的達成度: [詳細]
- [✅/⚠️/❌] シーン構成: [詳細]
- [✅/⚠️/❌] 章間接続: [詳細]

#### 世界観整合性
- [✅/⚠️/❌] 科学的正確性: [詳細]
- [✅/⚠️/❌] 時間スケール: [詳細]

#### 種設定整合性
- [✅/⚠️/❌] 種の描写: [詳細]
- [✅/⚠️/❌] 感情語チェック: [詳細]

---

### 2. 文体レビュー結果

#### 本作固有ルール遵守
| ルール | 状態 | 詳細 |
|--------|------|------|
| 無人称 | ✅ | 維持されている |
| 感情語禁止 | ⚠️ | 第X節に1箇所要確認 |
| ... | ... | ... |

#### ダイナミズム評価
| 項目 | 状態 | 詳細 |
|------|------|------|
| 構造的起伏 | ✅ | §Xに明確なクライマックス |
| 対立構造 | ✅ | [対立要素]が設計されている |
| 虚無感 | ✅ | §Yに効果的な不在描写 |

---

### 3. 伏線管理結果

#### 埋め込み確認
| 伏線 | 予定 | 実際 | 状態 |
|------|------|------|------|
| [伏線A] | §X | §X | ✅ |

#### 回収確認
| 伏線 | 埋込章 | 回収 | 状態 |
|------|--------|------|------|
| [伏線B] | 第Y章 | §Z | ✅ |

---

### 4. 描写の厚み評価

#### 厚みスコア
| 要素 | 出現数 | 評価 |
|------|--------|------|
| 具体的数値 | X箇所 | ✅十分 |
| 固有名詞 | Y箇所 | ⚠️追加推奨 |
| プロセス詳細 | Z箇所 | ✅十分 |

#### 重複・冗長
| 項目 | 出現数 | 評価 |
|------|--------|------|
| 終結表現「それだけのことだった」 | 1回 | ✅適切 |
| 虚無表現「誰も〜なかった」 | 3回 | ⚠️集約推奨 |

---

### 5. AC達成度

#### 読者が得るべき情報
| # | 情報 | 達成 | 根拠 |
|---|------|------|------|
| 1 | [情報A] | ✅ | §Xで具体的に描写 |
| 2 | [情報B] | ⚠️ | 暗示のみ、明示推奨 |

#### 読者が感じるべき感情
| # | 感情 | 達成 | 根拠 |
|---|------|------|------|
| 1 | [感情A] | ✅ | 構造的に喚起されている |

#### 禁止チェック
| # | 禁止事項 | 状態 |
|---|----------|------|
| 1 | 感傷的表現 | ✅回避 |
| 2 | 擬人化 | ✅回避 |

---

### 改善提案

#### 優先度: 高
1. **[問題箇所]** (行XX)
   - 問題: [問題の詳細]
   - 提案: [具体的な修正案]

#### 優先度: 中
1. **[問題箇所]** (行YY)
   - 問題: [問題の詳細]
   - 提案: [具体的な修正案]

#### 優先度: 低
1. **[改善箇所]** (行ZZ)
   - 現状: [現状の記述]
   - 提案: [改善案]

---

### 次のステップ

- [ ] 優先度「高」の問題を `/reviser` で修正
- [ ] 修正後、再度 `/quality-reviewer` でレビュー
- [ ] 全問題解決後、`/final-checker` で最終確認
```

---

## 評価基準

### スコア算出

| スコア | 評価 | 基準 |
|--------|------|------|
| 50-60 | A | 出版レベル。修正不要 |
| 40-49 | B | 高品質。軽微な修正のみ |
| 30-39 | C | 標準的。いくつかの修正が必要 |
| 20-29 | D | 要改善。重要な修正が必要 |
| 0-19 | E | 大幅な書き直しが必要 |

---

## 使用例

```
/quality-reviewer Extinction 04
```

または

```
第4章の品質レビューをお願いします
```

---

## 他エージェントとの連携

- **前のステップ**: `/proofreader` の校正完了後
- **次のステップ**: `/reviser` で問題を修正 → 再度 `/quality-reviewer`
